/* 진료카드 */
CREATE TABLE MY_SCHEMA.MEDICAL (
	MD_DATE VARCHAR2(30) NOT NULL, /* 진료번호 */
	D_NUMBER CHAR(5) NOT NULL, /* 강아지번호 */
	MD_SEC NVARCHAR2(2) NOT NULL, /* 진료구분 */
	DS_CODE CHAR(3), /* 병명코드 */
	T_CODE CHAR(3) /* 치료코드 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_MEDICAL
	ON MY_SCHEMA.MEDICAL (
		MD_DATE ASC
	);

ALTER TABLE MY_SCHEMA.MEDICAL
	ADD
		CONSTRAINT PK_MEDICAL
		PRIMARY KEY (
			MD_DATE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

/* 병명 */
CREATE TABLE MY_SCHEMA.DISEASE (
	DS_CODE CHAR(3) NOT NULL, /* 병명코드 */
	DS_NAME NVARCHAR2(50) NOT NULL /* 병이름 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_DISEASE
	ON MY_SCHEMA.DISEASE (
		DS_CODE ASC
	);

ALTER TABLE MY_SCHEMA.DISEASE
	ADD
		CONSTRAINT PK_DISEASE
		PRIMARY KEY (
			DS_CODE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

/* 치료 */
CREATE TABLE MY_SCHEMA.TREAT (
	T_CODE CHAR(3) NOT NULL, /* 치료코드 */
	T_HOW NVARCHAR2(50) NOT NULL, /* 치료방법 */
	T_COST NUMBER NOT NULL, /* 치료금액 */
	T_INS NVARCHAR2(10) /* 보험 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_TREAT
	ON MY_SCHEMA.TREAT (
		T_CODE ASC
	);

ALTER TABLE MY_SCHEMA.TREAT
	ADD
		CONSTRAINT PK_TREAT
		PRIMARY KEY (
			T_CODE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

/* 강아지카드 */
CREATE TABLE MY_SCHEMA.DOGCARD (
	D_NUMBER CHAR(5) NOT NULL, /* 강아지번호 */
	D_NAME NVARCHAR2(10) NOT NULL, /* 강아지이름 */
	D_KINDS NVARCHAR2(10), /* 견종 */
	D_AGE NUMBER(2), /* 강아지나이 */
	D_WEIGHT NUMBER(2), /* 강아지무게 */
	D_SEX NVARCHAR2(2), /* 강아지성별 */
	D_FDATE DATE, /* 첫방문일 */
	M_NUMBER CHAR(5) NOT NULL /* 회원번호 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_DOGCARD
	ON MY_SCHEMA.DOGCARD (
		D_NUMBER ASC
	);

ALTER TABLE MY_SCHEMA.DOGCARD
	ADD
		CONSTRAINT PK_DOGCARD
		PRIMARY KEY (
			D_NUMBER
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

/* 강아지엄마 */
CREATE TABLE MY_SCHEMA.MOM (
	M_NUMBER CHAR(5) NOT NULL, /* 회원번호 */
	M_PHONE NVARCHAR2(13) NOT NULL, /* 회원전화번호 */
	M_NAME NVARCHAR2(10) NOT NULL, /* 회원이름 */
	M_ADDR NVARCHAR2(50) NOT NULL /* 회원주소 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_MOM
	ON MY_SCHEMA.MOM (
		M_NUMBER ASC
	);

ALTER TABLE MY_SCHEMA.MOM
	ADD
		CONSTRAINT PK_MOM
		PRIMARY KEY (
			M_NUMBER
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

/* 병원비영수증 */
CREATE TABLE MY_SCHEMA.BILL (
	MD_DATE VARCHAR2(30) NOT NULL, /* 진료번호 */
	B_VCOST NUMBER, /* 진단비 */
	B_TCOST NUMBER /* 치료비 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_BILL
	ON MY_SCHEMA.BILL (
		MD_DATE ASC
	);

ALTER TABLE MY_SCHEMA.BILL
	ADD
		CONSTRAINT PK_BILL
		PRIMARY KEY (
			MD_DATE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

/* 직원 */
CREATE TABLE MY_SCHEMA.EMP (
	E_NUMBER CHAR(5) NOT NULL, /* 직원사번 */
	E_NAME NVARCHAR2(10) NOT NULL, /* 직원이름 */
	E_PHONE NVARCHAR2(13) NOT NULL, /* 직원전화번호 */
	E_HIREDATE DATE, /* 입사일 */
	E_AGE NUMBER(2), /* 직원나이 */
	E_SAL NUMBER, /* 급여 */
	H_CODE CHAR(3) NOT NULL /* 부서코드 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_EMP
	ON MY_SCHEMA.EMP (
		E_NUMBER ASC
	);

ALTER TABLE MY_SCHEMA.EMP
	ADD
		CONSTRAINT PK_EMP
		PRIMARY KEY (
			E_NUMBER
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

/* 병원 */
CREATE TABLE MY_SCHEMA.HOSPITAL (
	H_CODE CHAR(3) NOT NULL, /* 부서코드 */
	H_JOB NVARCHAR2(10) NOT NULL, /* 업무내용 */
	H_MGR NVARCHAR2(10) /* 부서장 */
);

CREATE UNIQUE INDEX MY_SCHEMA.PK_HOSPITAL
	ON MY_SCHEMA.HOSPITAL (
		H_CODE ASC
	);

ALTER TABLE MY_SCHEMA.HOSPITAL
	ADD
		CONSTRAINT PK_HOSPITAL
		PRIMARY KEY (
			H_CODE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

ALTER TABLE MY_SCHEMA.MEDICAL
	ADD
		CONSTRAINT FK_DOGCARD_TO_MEDICAL
		FOREIGN KEY (
			D_NUMBER
		)
		REFERENCES MY_SCHEMA.DOGCARD (
			D_NUMBER
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

ALTER TABLE MY_SCHEMA.MEDICAL
	ADD
		CONSTRAINT FK_DISEASE_TO_MEDICAL
		FOREIGN KEY (
			DS_CODE
		)
		REFERENCES MY_SCHEMA.DISEASE (
			DS_CODE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

ALTER TABLE MY_SCHEMA.MEDICAL
	ADD
		CONSTRAINT FK_TREAT_TO_MEDICAL
		FOREIGN KEY (
			T_CODE
		)
		REFERENCES MY_SCHEMA.TREAT (
			T_CODE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

ALTER TABLE MY_SCHEMA.DOGCARD
	ADD
		CONSTRAINT FK_MOM_TO_DOGCARD
		FOREIGN KEY (
			M_NUMBER
		)
		REFERENCES MY_SCHEMA.MOM (
			M_NUMBER
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

ALTER TABLE MY_SCHEMA.BILL
	ADD
		CONSTRAINT FK_MEDICAL_TO_BILL
		FOREIGN KEY (
			MD_DATE
		)
		REFERENCES MY_SCHEMA.MEDICAL (
			MD_DATE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;

ALTER TABLE MY_SCHEMA.EMP
	ADD
		CONSTRAINT FK_HOSPITAL_TO_EMP
		FOREIGN KEY (
			H_CODE
		)
		REFERENCES MY_SCHEMA.HOSPITAL (
			H_CODE
		)
		NOT DEFERRABLE
		INITIALLY IMMEDIATE
		ENABLE
		VALIDATE;